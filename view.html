<!doctype html>
<html lang="zh-Hant">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>今日一句</title>
  <!-- Preload critical intro images to ensure the intro shows instantly -->
  <link rel="preload" as="image" href="./image/background.jpg" />
  <link rel="preload" as="image" href="./image/BIG大特會-white.png" />
  <link rel="preload" as="image" href="./image/topchurchlogo.png" />
  <!-- Optional preconnects for faster module/CDN fetches -->
  <link rel="preconnect" href="https://esm.sh" crossorigin />
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin />
    <style>
      :root {
        --card:#0b1220; --muted:#94a3b8; --text:#e5e7eb; --accent:#22c55e; --accent2:#60a5fa; --bg-img:url('./FrostedGlass/FrostedGlass_01.jpg');
        --safe-top: env(safe-area-inset-top); --safe-bottom: env(safe-area-inset-bottom);
        /* Reserve vertical space so logos never overlap cards */
  --brandTopSpace: 84px;   /* top-left BIG logo reserved height */
  --brandBottomSpace: 74px; /* bottom-right church logo reserved height */
  --cards-gap: 8px;
      }
      *{box-sizing:border-box}
      html, body { height: 100%; }
      body{
        margin:0;
        font-family:system-ui,-apple-system,Segoe UI,Roboto,Noto Sans TC,PingFang TC,Microsoft JhengHei,sans-serif;
        color:var(--text);
        height:100svh;
        overflow:hidden;
      }
      /* Background layer */
      body::before{
        content:"";
        position: fixed; inset: 0;
        background: var(--bg-img) center/cover no-repeat fixed;
        filter: brightness(0.6) saturate(1.05);
        z-index: -2;
      }
      /* Subtle dark overlay to improve contrast */
      body::after{
        content:""; position: fixed; inset: 0;
        background: radial-gradient(1200px 600px at 50% -200px, rgba(0,0,0,0.35), rgba(0,0,0,0.6));
        z-index: -1;
      }

      .container{width:100%;max-width:920px;margin:0 auto;height:100%;display:grid;grid-template-rows:auto 1fr;gap:12px;
        padding-left:clamp(12px,3vw,16px); padding-right:clamp(12px,3vw,16px);
        padding-top: calc(12px + var(--safe-top) + var(--brandTopSpace));
        padding-bottom: calc(12px + var(--safe-bottom) + var(--brandBottomSpace));
      }
  .cards{display:grid;gap:var(--cards-gap);height:100%;grid-template-rows:1fr 1fr}
  .card{background:linear-gradient(180deg,rgba(255,255,255,0.06),rgba(255,255,255,0.04));border:1px solid rgba(255,255,255,0.10);border-radius:14px;padding:clamp(10px,2.8vw,16px);backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px);display:flex;flex-direction:column;min-height:0}
  .content{font-size:clamp(18px,4.8vw,23px);line-height:1.6;overflow:auto;-webkit-overflow-scrolling:touch}
  .ref{margin-top:6px;font-size:clamp(11px,3vw,13px);color:var(--muted);letter-spacing:.02em}
      .card.verse{border-left:3px solid var(--accent)}
      .card.quote{border-left:3px solid var(--accent2)}
      .note{color:var(--muted);font-size:12px;text-align:center}
      .hidden{display:none}

  /* Intro overlay */
  .intro { position: fixed; inset: 0; background: url('./image/background.jpg') center/cover no-repeat fixed, rgba(0,0,0,0.8); display: grid; place-items: center; z-index: 40; }
      .intro-inner { display:grid; gap: 28px; justify-items:center; }
      .intro .brand img { width: min(86vw, 720px); height:auto; filter: drop-shadow(0 6px 24px rgba(0,0,0,0.6)); opacity: 0; transform: translateY(-8px); animation: fadeInUp 1.4s ease both .2s; }
      .intro .logo-bottom { width: min(56vw, 480px); opacity: 0; transform: translateY(8px); animation: fadeInDown 1.4s ease both .6s; }
      @keyframes fadeInUp { from { opacity:0; transform: translateY(8px);} to { opacity:1; transform: translateY(0);} }
      @keyframes fadeInDown { from { opacity:0; transform: translateY(-8px);} to { opacity:1; transform: translateY(0);} }
  .corner-logo { position: fixed; right: 12px; bottom: calc(12px + env(safe-area-inset-bottom)); width: 60px; height:auto; opacity:.95; z-index: 10; pointer-events:none; }
  .brand-top-left { position: fixed; left: 12px; top: calc(12px + env(safe-area-inset-top)); width: min(52vw, 210px); height:auto; opacity:.98; z-index: 10; pointer-events:none; }
    </style>
  </head>
  <body>
  <script>
    // Randomize background from FrostedGlass/*.jpg
    (function(){
      try {
        var imgs = [
          './FrostedGlass/FrostedGlass_01.jpg',
          './FrostedGlass/FrostedGlass_02.jpg',
          './FrostedGlass/FrostedGlass_03.jpg',
          './FrostedGlass/FrostedGlass_04.jpg',
          './FrostedGlass/FrostedGlass_05.jpg'
        ];
        var pick = imgs[Math.floor(Math.random()*imgs.length)];
        document.documentElement.style.setProperty('--bg-img', 'url("'+pick+'")');
      } catch {}
    })();
  </script>
  <div id="intro" class="intro">
      <div class="intro-inner">
    <div class="brand"><img src="./image/BIG大特會-white.png" alt="BIG大特會" decoding="async" loading="eager" fetchpriority="high" width="720" /></div>
    <img class="logo-bottom" src="./image/topchurchlogo.png" alt="Top Church" decoding="async" loading="eager" fetchpriority="high" width="480" />
      </div>
    </div>
    <div class="container">
      <div id="loading" class="note">載入中…</div>
      <div id="error" class="note hidden">載入資料失敗，請稍後再試。</div>
      <section id="cards" class="cards hidden">
        <article class="card verse">
          <div id="verseText" class="content">—</div>
          <div id="verseRef" class="ref"></div>
        </article>
        <article class="card quote">
          <div id="quoteText" class="content">—</div>
          <div id="quoteRef" class="ref"></div>
        </article>
      </section>
    </div>
  <img class="brand-top-left" src="./image/BIG大特會-white.png" alt="BIG大特會" />
    <img class="corner-logo" src="./image/topchurchlogo.png" alt="Top Church" />
  <script src="./scripts/app.js" type="module"></script>
    <script>
      // 片頭延長到5秒，淡出 1.5 秒；點擊任意處可立即略過
      function hideIntro(){
        const el = document.getElementById('intro');
        if (!el || el.__hidden) return;
        el.__hidden = true;
        el.style.transition = 'opacity 1.5s ease';
        el.style.opacity = '0';
        setTimeout(()=>{ el.style.display = 'none'; }, 1600);
      }
      // 確保先繪製首屏再啟動沉重初始化
      requestAnimationFrame(()=>{ setTimeout(()=>{ hideIntro(); }, 5000); });
      // 使用者互動立即跳過
      addEventListener('click', hideIntro, { once:true, capture:true });
      addEventListener('keydown', hideIntro, { once:true, capture:true });
    </script>
  </body>
  </html>
